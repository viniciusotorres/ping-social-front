<app-nav-bar-common
  [showSelectTribe]="showSelectTribe"
  (chat)="goToChat()"
  (profile)="goToProfile()"
  (notifications)="goToNotifications()"
  (tribeModal)="openTribeModal()"
  (logoutEvent)="logout()"
></app-nav-bar-common>

<!-- Conte√∫do principal -->
<div class="max-w-2xl mx-auto pt-24 px-4">
  <!-- Campo de novo post -->
  <div class="bg-white dark:bg-gray-800 shadow p-4 rounded-xl mb-6">
    <h3 class="text-md font-semibold text-gray-800 dark:text-gray-100 mb-2">Criar novo post</h3>
    <textarea
      rows="3"
      class="w-full p-3 border rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-white resize-none"
      placeholder="Compartilhe algo com a comunidade... (em breve)"
      disabled
    ></textarea>
    <button
      class="mt-2 bg-blue-500 text-white text-sm px-4 py-2 rounded-lg opacity-50 cursor-not-allowed"
      disabled
    >
      Postar
    </button>
  </div>

  <!-- Post fixado 1: Boas-vindas -->
  <div class="bg-white dark:bg-gray-800 border-l-4 border-blue-500 shadow p-5 rounded-xl mb-6">
    <div class="flex items-center mb-2">
      <!-- Avatar -->
      <img
        src="https://i.pravatar.cc/32?img=12"
        alt="Admin Avatar"
        class="w-8 h-8 rounded-full mr-2 border border-blue-500"
      />
      <!-- Nome + data -->
      <div class="flex flex-col">
        <div class="bg-blue-500 text-white font-bold px-3 py-1 text-sm rounded-full w-fit">Admin</div>
        <span class="text-gray-600 dark:text-gray-300 text-xs mt-1">Post fixado ‚Ä¢ 21 de Junho de 2025</span>
      </div>
    </div>
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
      Bem-vindo √† primeira vers√£o do sistema!
    </h2>
    <p class="text-gray-700 dark:text-gray-200 text-sm leading-relaxed">
      Essa √© uma vers√£o inicial em desenvolvimento. Todos os recursos liberados s√£o para fins de testes e podem sofrer altera√ß√µes.
      Sua colabora√ß√£o √© muito importante neste processo. Caso encontre algum erro ou tenha sugest√µes, sinta-se √† vontade para entrar em contato.
    </p>
  </div>

  <!-- Post fixado: Recursos dispon√≠veis -->
  <div class="bg-white dark:bg-gray-800 border-l-4 border-green-500 shadow p-5 rounded-xl mb-6">
    <div class="flex items-center mb-2">
      <!-- Avatar -->
      <img
        src="https://i.pravatar.cc/32?img=12"
        alt="Admin Avatar"
        class="w-8 h-8 rounded-full mr-2 border border-green-500"
      />
      <!-- Nome + data -->
      <div class="flex flex-col">
        <div class="bg-green-500 text-white font-bold px-3 py-1 text-sm rounded-full w-fit">Admin</div>
        <span class="text-gray-600 dark:text-gray-300 text-xs mt-1">Post fixado ‚Ä¢ 24 de Junho de 2025</span>
      </div>
    </div>
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
      Plataforma em evolu√ß√£o ‚Äî confira o que j√° est√° dispon√≠vel!
    </h2>
    <p class="text-gray-700 dark:text-gray-200 text-sm leading-relaxed">
      A plataforma j√° conta com diversos recursos ativos e prontos para uso:
    </p>
    <ul class="list-disc list-inside text-gray-700 dark:text-gray-200 text-sm mt-3 space-y-1">
      <li><strong>Login e Registro</strong> com autentica√ß√£o segura.</li>
      <li><strong>Perfil de usu√°rio</strong> com informa√ß√µes, seguidores, seguindo e tribos.</li>
      <li><strong>Funcionalidade de seguir e deixar de seguir</strong> outros usu√°rios.</li>
      <li><strong>Listagem de seguidores e seguindo</strong> com visual moderno.</li>
      <li><strong>Tribos</strong>: visualiza√ß√£o e associa√ß√£o a m√∫ltiplas tribos.</li>
      <li><strong>Escolha de tribos</strong> com modal interativo e etapas explicativas.</li>
      <li><strong>Interface responsiva</strong>, com modo escuro ativado por padr√£o.</li>
    </ul>
    <p class="text-gray-700 dark:text-gray-200 text-sm mt-3">
      Continuamos trabalhando para adicionar novas funcionalidades, melhorar a experi√™ncia do usu√°rio e garantir uma navega√ß√£o mais fluida.
    </p>
    <p class="text-gray-700 dark:text-gray-200 text-sm mt-2">
      Caso tenha sugest√µes ou encontre algum erro, entre em contato conosco. Sua opini√£o √© essencial para o crescimento da plataforma!
    </p>
  </div>


  <!-- Post fixado 2: Reset de senha em andamento -->
  <div class="bg-white dark:bg-gray-800 border-l-4 border-yellow-500 shadow p-5 rounded-xl mb-6">
    <div class="flex items-center mb-2">
      <!-- Avatar -->
      <img
        src="https://i.pravatar.cc/32?img=12"
        alt="Admin Avatar"
        class="w-8 h-8 rounded-full mr-2 border border-yellow-500"
      />
      <!-- Nome + data -->
      <div class="flex flex-col">
        <div class="bg-yellow-500 text-white font-bold px-3 py-1 text-sm rounded-full w-fit">Admin</div>
        <span class="text-gray-600 dark:text-gray-300 text-xs mt-1">Post fixado ‚Ä¢ 21 de Junho de 2025, 16:45</span>
      </div>
    </div>
    <h2 class="text-lg font-semibold text-gray-900 dark:text-white mb-2">
      Funcionalidade de recupera√ß√£o de senha em andamento
    </h2>
    <p class="text-gray-700 dark:text-gray-200 text-sm leading-relaxed">
      Estamos desenvolvendo as funcionalidades de "Esqueci minha senha" e "Redefinir senha". Em breve estar√£o dispon√≠veis.
      Agradecemos pela paci√™ncia e pelo apoio cont√≠nuo enquanto aprimoramos a plataforma!
    </p>
  </div>


  <!-- Footer com sugest√£o -->
  <footer class="mt-12 bg-gray-100 dark:bg-gray-800 py-6">
    <div class="max-w-2xl mx-auto px-4">
      <h4 class="text-center text-gray-800 dark:text-white font-semibold mb-2">
        üí° Este campo √© MUITO IMPORTANTE!
      </h4>
      <p class="text-center text-sm text-gray-600 dark:text-gray-300 mb-3">
        Aqui voc√™ pode sugerir o que gostaria de ver nesta rede social. Sua opini√£o √© essencial para moldar o futuro da plataforma!
      </p>
      <textarea
        rows="2"
        class="w-full p-3 border rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-white resize-none"
        placeholder="Sua sugest√£o aqui..."
      ></textarea>
      <div class="text-center mt-3">
        <button
          class="bg-green-500 hover:bg-green-600 text-white text-sm px-4 py-2 rounded-lg"
          disabled
        >
          Enviar Sugest√£o (em breve)
        </button>
      </div>
    </div>
  </footer>
</div>

<!-- Modal de Sele√ß√£o de Tribo com Steps -->
@if (showSelectTribe) {
  <div class="fixed inset-0 z-50 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center">
    <div class="bg-white dark:bg-gray-900 w-full max-w-md rounded-2xl p-6 shadow-2xl border dark:border-gray-700 relative">

      <!-- T√≠tulo din√¢mico -->
      <h2 class="text-2xl font-extrabold text-gray-800 dark:text-white mb-6 text-center">
        {{ step === 1 ? 'O que s√£o Tribos?' : step === 2 ? 'Por que escolher uma Tribo?' : 'Escolha sua Tribo' }}
      </h2>

      <!-- Step 1 - O que s√£o tribos -->
      <div *ngIf="step === 1" class="text-gray-700 dark:text-gray-300 text-center space-y-4">
        <p>As <strong>tribos</strong> s√£o grupos tem√°ticos onde pessoas com interesses semelhantes se conectam.</p>
        <p>Elas ajudam voc√™ a encontrar conte√∫dos relevantes e se envolver com quem compartilha suas ideias.</p>
      </div>

      <!-- Step 2 - Por que escolher uma tribo -->
      <div *ngIf="step === 2" class="text-gray-700 dark:text-gray-300 text-center space-y-4">
        <p>Escolher uma tribo ajuda a <strong>personalizar sua experi√™ncia</strong> na plataforma.</p>
        <p>Voc√™ receber√° sugest√µes de postagens, eventos e pessoas com base nessa escolha.</p>
      </div>

      <!-- Step 3 - Escolha da tribo -->
      <div *ngIf="step === 3">
        <div class="grid gap-4">
          <button
            *ngFor="let tribe of tribes"
            (click)="choiceTribe(tribe.id)"
            class="w-full flex items-center gap-3 px-5 py-3 rounded-xl border border-gray-200 dark:border-gray-700
                 bg-gray-50 dark:bg-gray-800 hover:bg-gradient-to-r hover:from-pink-500 hover:to-yellow-500
                 hover:text-white transition-all duration-300 text-left font-medium"
          >
            <i class="fas fa-campground text-lg" *ngIf="tribe.icon"></i>
            {{ tribe.name }}
          </button>
        </div>
      </div>

      <!-- Navega√ß√£o entre steps -->
      <div class="mt-6 flex justify-between items-center" *ngIf="step < 3">
        <button
          *ngIf="step > 1"
          (click)="step = step - 1"
          class="text-sm text-gray-500 hover:text-blue-500 transition"
        >
          ‚Üê Voltar
        </button>

        <div class="flex-1"></div>

        <button
          (click)="step = step + 1"
          class="text-sm text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition"
        >
          Pr√≥ximo ‚Üí
        </button>
      </div>

      <!-- Bot√£o de cancelar (em qualquer etapa) -->
      <div class="text-center mt-4">
        <button
          (click)="closeTribeModal()"
          class="text-sm text-gray-500 hover:text-red-500 transition"
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>
}

